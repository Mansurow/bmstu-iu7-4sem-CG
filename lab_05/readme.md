# Лаюораторная работа 5 "РЕАЛИЗАЦИЯ И ИССЛЕДОВАНИЕ АЛГОРИТМОВ РАСТРОВОГО ЗАПОЛНЕНИЯ СПЛОШНЫХ ОБЛАСТЕЙ"

## Задание

В рамках данной работы необходимо реализовать один из алгоритмов заполнения сплошной области.
Необходимо обеспечить ввод произвольной многоугольной области, содержащей произвольное количество отверстий. 

- Ввод (вершин многоугольника) производить с помощью мыши, при этом для удобства пользователя должны отображаться ребра, соединяющие вводимые вершины. 
- Предусмотреть ввод горизонтальных и вертикальных ребер.
- Пользователь должен иметь возможность задания цвета заполнения.
- Работа программы должна предусматривать два режима – с задержкой и без задержки.
- Режим с задержкой должен позволить проследить выполняемую последовательность действий.
(Задержку целесообразно выполнять после обработки очередной строки).
Обеспечить замер времени выполнения алгоритма (без задержки, с выводом на экран только окончательного результата).

Номер варината по журналу % 4:
- 1: с упорядоченным списком ребер
     - используя список или массив (долгая подготовка данных)
     - использовать y-группы (проблемы с памятью - статика(мало или много ) или динамика(нужно следить и рабьотать))
     - САР (нет проблем)
- 2: по ребрам
- 3: с перегородкой
- 0: с флагом

## Реализация

Вариант: 13 % 4 = 1 

Реализовал все три реализации алгоритма со списком ребер, но в программе, используется САР.

![image](https://user-images.githubusercontent.com/62243773/166491307-881d2957-f430-4391-85c1-897503c8e273.png)

## Вопросы

### Дает решить:

Проблема нескольких горизонтальных рёбер, находящихся на одной строке

![image](https://user-images.githubusercontent.com/62243773/166493603-cdb735c5-e592-41ce-beab-33916306252f.png)

Нас интересует, как правильно закрасить строку, на которой находятся вершины 1 2 4 5 7 8 10. Центр координат находится в верхнем левом углу, ось y направлена вниз. Как происходит закраска (2-4) описано ниже:

1. Рассмотрим, что происходит ДО интересующей нас строки, на которой расположены вершины 1 2 4 5 7 8 10. На этом моменте в САР ребра (2-3) и (3-4). Будет закрашена внутренняя часть двух ребер, образованного (2-3) и (3-4).
2. На САМОЙ сканирующей строке ребра (2-3) и (3-4) исключены из САР (dy <= 0), а ребра (1-14), (5-6), (6-7), (8-9), (9-10) и (10-16) добавлены в САР. Именно на этом моменте произойдет разбиение по парам. Образуются следующие пары рёбер: (1-14) и (5-6), (6-7) и (8-9), (9-10) и (10-16). Начинается закраска, закрасится линия (1-5), (7-8) и вершина 10. Линия (1-5) закрашивает промежутки (1-2), (2-4) и (4-5).

#### Куров потом сказал, что всё можно описать боле кратко:
> Не учитывается последняя точка - вершина ребра.

### 1.Что мы называем растровой разверткой сплошных областей?
Растровая развертка сплошных областей это генерация областей на основе простых описаний рёбер или вершин.

### 2.Какие области можем заполнять с помощью этого алгоритма или вообще с помощью растровых?
Многоугольники(выпуклые/вогнутые)

### 3.Как упорядочиваем рёбра в алгоритме?
Есть текущая сканирующая строка. В списке активных рёбер хранятся только те рёбра, которые в данный момент пересекаются этой строкой. В самом начале упорядочиваются по самому большому значению сканирующей строки которая их будет пересекать. По максимальному значению координаты y. Упорядочиваем по убыванию.

### 4.Что такое активное ребро?
Активное ребро - то ребро, которое пересекается сканирующей строкой в рассматриваемый момент работы алгоритма.

### 5.Как находим активные рёбра?
Изначально сканирующую строку ставим в самую верхнюю точку, которая есть у ребра. Начинаем этой сканирующей строкой спускаться вниз.Когда встречаем ребро, у которого номер самой высшей сканирующей строки совпадает с текущей сканирующей строкой, то добавляем его в САР. Когда сканирующая строка полностью проходит это ребро удаляем его из списка.

### 6.Какую информацию выбираем из списка активных рёбер?
Нас интересует значение по оси абсцисс, пересечение этого ребра со сканирующей строкой.

### 7.Что делаем с этими значениями абсцисс?
Упорядочиваем эти значения(от меньшего к большему), разбиваем эти значения по парам.

### 8.Чем плох простой вариант?
Простой вариант трудоёмкий (много сортировок) и по памяти плохо (храним много данных, а именно точек пересечения всех сканирующих строк с рёбрами).

### 9.Как увеличиваем эффективность?
Храним пересечения только с текущей сканирующей строкой и первую сортировку по факту отбрасываем.

### 10. С какими проблемами сталкиваемся в растровых алгоритмах?

#### Проблема 1:

Проблема может быть в горизонтальных рёбрах. (Что с ними делать?) Нужно отбрасывать одну из вершин этого ребра и не делать с ним пару. Всегда ли можно так делать? Нет не всегда. Из-за проблемы с вершинами. (вторая проблема)

#### Проблема 2

Существует проблема с вершинами. Два ребра в вершине имеют по точке. Проблема заключается в том, что в некоторых случаях мы должны учитывать обе точки, а в некоторых случаях одну из точек надо отбросить. Если точка является локальным экстремумом(минимумом или максимумом), то два пересечения(не отбрасываем точки).

Когда несколько горизонтальных рёбер проблема в том, что вершины не являются экстремумами.

Пример решения проблемы (!!!!не проверенный Куровым!!!!!)

Тут два горизонтальных ребра

В первом случае мы должны правую вершину горизонтали отбросить, потому что после неё идёт область вне фигуры. Во втором наоборот, мы точку не отбрасываем и используем для составления пары

В принципе можно зная какой цвет над горизонталью сказать как нам поступить: Если цвет фона и ребро идёт вверх, то не отбрасываем Если цвет закраски и ребро идёт вверх, то отбрасываем.

Ну и по такой же логике делаем, когда ребро идёт вниз. И такой же подход для рёбер слева от горизонтали

### 12.Чем отличается заполнение от закраски?

#### РАСТРОВЫЕ МЕТОДЫ(aka ЗАКРАСКА)
В растровых методах делается попытка определить в порядке сканирования строк принадлежность точки внутренней области контура или многоугольника. Эти алгоритмы обычно просматривают многоугольники (контуры) от верхней точки до нижней. Методы растровой развертки применимы обычно и к векторным дисплеям, в которых они используются для штриховки или закраски контуров. (растровая развертка = закраска)

#### ЗАТРАВКА (aka ЗАПОЛНЕНИЕ)
В методах затравочного заполнения предполагается, что известна некоторая точка (затравка), лежащая внутри замкнутого контура.
В алгоритмах затравочного заполнения ищут точки, соседние с затравочными и расположенные внутри контура. Если точка оказывается внутри контура, то она становится новой затравочной точкой и поиск продолжается рекурсивно. Если же точка расположена не внутри контура, то это означает, что обнаружена граница контура. Затравочные алгоритмы применимы только к растровым дисплеям.
